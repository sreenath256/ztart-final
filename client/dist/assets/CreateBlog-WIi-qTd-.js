import{r,a as P,j as e}from"./index-tmO2HUr7.js";import{i as B,g as L,j as E,b as G}from"./index.esm-7EgU41Cz.js";import{v as U,a as z}from"./Api-Yfgixm3F.js";import{R as J}from"./quill.snow-56W210MD.js";import"./iconBase-VPgEYFnN.js";const K=()=>{const[u,j]=r.useState(""),[o,y]=r.useState(""),[m,w]=r.useState(""),[g,N]=r.useState(""),[p,q]=r.useState(""),[n,x]=r.useState(null),[b,k]=r.useState(null),[C,h]=r.useState(""),[l,d]=r.useState([{question:"",answer:""}]),[c,f]=r.useState(!1),S=P(),F={toolbar:[[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{size:["small",!1,"large","huge"]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],[{align:[]}],["link","image","video"],["clean"],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],["code-block"]]},A=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","link","image","video","color","background","align","script","indent","direction","code-block"],D=s=>{const t=s.target.files[0];t&&(x(t),h(URL.createObjectURL(t)))},M=()=>{x(null),h("")},v=(s,t,a)=>{const i=[...l];i[s][t]=a,d(i)},I=()=>{d([...l,{question:"",answer:""}])},R=s=>{const t=l.filter((a,i)=>i!==s);d(t)},Q=async s=>{s.preventDefault(),f(!0);const t=new FormData;t.append("title",u),t.append("slug",o),t.append("metaTitle",m),t.append("imageAlt",b),t.append("metaDescription",g),t.append("description",p),t.append("file",n),t.append("faqs",JSON.stringify(l));try{const a=await z.post(`${U.api_url}/api/1.0/admin/blog/create-blog`,t,{headers:{"Content-Type":"multipart/form-data"}});S("/manage-blogs"),console.log("Blog submitted successfully",a.data)}catch(a){console.error("Error submitting blog",a)}finally{f(!1)}},T=s=>{const t=s.target.value.toLowerCase().replace(/\s+/g,"-");y(t)};return e.jsxs("form",{onSubmit:Q,className:"max-w-4xl mx-auto p-4 space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-700 mb-6 hidden lg:block",children:"Add Blog"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Blog Title"}),e.jsx("input",{type:"text",value:u,onChange:s=>j(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-visaclr focus:border-visaclr",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug"}),e.jsx("input",{type:"text",value:o,onChange:T,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-visaclr focus:border-visaclr",required:!0}),o&&e.jsxs("p",{className:"text-sm pt-2 font-PoppinsLight text-[#00a39a]",children:["Generated Slug: ",o]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Meta Title"}),e.jsx("input",{type:"text",placeholder:"meta title...",value:m,onChange:s=>w(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-visaclr focus:border-visaclr",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Meta Description"}),e.jsx("input",{type:"text",placeholder:"meta description...",value:g,onChange:s=>N(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-visaclr focus:border-visaclr",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Visa Image"}),!n&&e.jsx("div",{className:"flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:e.jsxs("div",{className:"space-y-1 text-center",children:[e.jsx(B,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsxs("div",{className:"flex text-sm text-gray-600",children:[e.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-visaclrhvr hover:text-visaclr focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-visaclr",children:[e.jsx("span",{children:"Upload a file"}),e.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:D,accept:"image/*",required:!0})]}),e.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]})}),n&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:C,alt:"Visa Preview",className:"w-full h-auto border border-gray-300 rounded-md"}),e.jsx("button",{type:"button",onClick:M,className:"absolute top-2 right-2 bg-white text-red-500 p-1 rounded-full shadow-md hover:bg-red-100",children:e.jsx(L,{className:"h-6 w-6"})})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image alt"}),e.jsx("input",{type:"text",value:b,onChange:s=>k(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-visaclr focus:border-visaclr",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("style",{jsx:!0,global:!0,children:`
          .ql-editor {
            min-height: 200px;
            max-height:500px;
          }
          .ql-toolbar.ql-snow {
            border-radius: 0.375rem 0.375rem 0 0;
          }
          .ql-container.ql-snow {
            border-radius: 0 0 0.375rem 0.375rem;
          }
        `}),e.jsx("div",{className:"mb-2 ",children:e.jsx(J,{value:p,onChange:s=>q(s),placeholder:"Enter the description here...",modules:F,formats:A})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"FAQs"}),l.map((s,t)=>e.jsxs("div",{className:"mb-4 p-4 border border-gray-200 rounded-md",children:[e.jsx("input",{type:"text",value:s.question,onChange:a=>v(t,"question",a.target.value),placeholder:"FAQ Question",className:"w-full px-3 py-2 mb-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-visaclr focus:border-visaclr",required:!0}),e.jsx("textarea",{value:s.answer,onChange:a=>v(t,"answer",a.target.value),placeholder:"FAQ Answer",rows:2,className:"w-full px-3 py-2 mb-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-visaclr focus:border-visaclr",required:!0}),e.jsxs("button",{type:"button",onClick:()=>R(t),className:"text-red-500 hover:text-red-700",children:[e.jsx(E,{className:"inline mr-1"})," Remove FAQ"]})]},t)),e.jsxs("button",{type:"button",onClick:I,className:"mt-2 text-[#00a39a] hover:text-[#136a65]",children:[e.jsx(G,{className:"inline mr-1"})," Add FAQ"]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:c,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ${c?"bg-gray-400 cursor-not-allowed":"bg-[#00a39a] hover:bg-[#15756e]"}`,children:c?"Submitting...":"Submit"})})]})};export{K as default};
