import{r,a as H,j as e,Q as g}from"./index-tmO2HUr7.js";import{i as K,g as W,j as S,b as A}from"./index.esm-7EgU41Cz.js";import{v as X,a as Y}from"./Api-Yfgixm3F.js";import{R as h}from"./quill.snow-56W210MD.js";import"./iconBase-VPgEYFnN.js";const Z=()=>{const[f,Q]=r.useState(""),[v,F]=r.useState(""),[i,M]=r.useState(""),[D,I]=r.useState(""),[c,R]=r.useState(""),[j,V]=r.useState(""),[y,E]=r.useState(""),[d,N]=r.useState(null),[P,w]=r.useState(""),[T,ee]=r.useState(""),[o,u]=r.useState([{question:"",answer:""}]),[n,m]=r.useState([{question:"",answer:""}]),L=H(),[q,x]=r.useState(!1),p={toolbar:[[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{size:["small",!1,"large","huge"]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],[{align:[]}],["link","image","video"],["clean"],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],["code-block"]]},b=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","link","image","video","color","background","align","script","indent","direction","code-block"],G=t=>{const s=t.target.files[0];s&&(N(s),w(URL.createObjectURL(s)))},U=()=>{N(null),w("")},C=(t,s,a)=>{const l=[...o];l[t][s]=a,u(l)},k=(t,s,a)=>{const l=[...n];l[t][s]=a,m(l)},J=()=>{u([...o,{question:"",answer:""}])},O=t=>{const s=o.filter((a,l)=>l!==t);u(s)},_=()=>{m([...n,{question:"",answer:""}])},z=t=>{const s=n.filter((a,l)=>l!==t);m(s)},$=async t=>{t.preventDefault(),x(!0);const s=new FormData;s.append("country",v),s.append("title",f),s.append("slug",i),s.append("description",j),s.append("metaTitle",c),s.append("metaDescription",c),s.append("imageAlt",y),s.append("about",T),d&&s.append("file",d),s.append("questions",JSON.stringify(o)),s.append("faqs",JSON.stringify(n));try{const a=await Y.post(`${X.api_url}/api/1.0/admin/testimonial/create-testimonial`,s,{headers:{"Content-Type":"multipart/form-data"}});a.status===200?(L("/manage-visas"),console.log("Visa created successfully",a.data),g.success("Visa created successfully")):(console.error("Error creating visa",a.data),x(!1),g.error("Error creating visa"))}catch(a){console.error("API call failed",a),g.error("Error creating visa, slug is unique"),x(!1)}},B=t=>{const s=t.target.value.toLowerCase().replace(/\s+/g,"-");M(s)};return e.jsxs("form",{onSubmit:$,className:"max-w-4xl mx-auto p-4 space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-700 mb-6 hidden lg:block",children:"Add Visas"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Visa Country"}),e.jsx("input",{type:"text",value:v,onChange:t=>F(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-visaclr focus:border-visaclr",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Visa Title"}),e.jsx("input",{type:"text",value:f,onChange:t=>Q(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-visaclr focus:border-visaclr",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Meta title"}),e.jsx("input",{type:"text",value:D,placeholder:"Meta Title...",onChange:t=>I(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-visaclr focus:border-visaclr",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Meta Description"}),e.jsx("input",{type:"text",placeholder:"Meta Description...",value:c,onChange:t=>R(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-visaclr focus:border-visaclr",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug"}),e.jsx("input",{type:"text",value:i,onChange:B,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-visaclr focus:border-visaclr",required:!0}),i&&e.jsxs("p",{className:"text-sm pt-2 font-PoppinsLight text-[#00a39a]",children:["Generated Slug: ",i]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Visa Image"}),!d&&e.jsx("div",{className:"flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:e.jsxs("div",{className:"space-y-1 text-center",children:[e.jsx(K,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsxs("div",{className:"flex text-sm text-gray-600",children:[e.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-visaclrhvr hover:text-visaclr focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-visaclr",children:[e.jsx("span",{children:"Upload a file"}),e.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:G,accept:"image/*",required:!0})]}),e.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]})}),d&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:P,alt:"Visa Preview",className:"w-full h-auto border border-gray-300 rounded-md"}),e.jsx("button",{type:"button",onClick:U,className:"absolute top-2 right-2 bg-white text-red-500 p-1 rounded-full shadow-md hover:bg-red-100",children:e.jsx(W,{className:"h-6 w-6"})})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image alt"}),e.jsx("input",{type:"text",value:y,onChange:t=>E(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-visaclr focus:border-visaclr",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx(h,{value:j,onChange:t=>V(t),placeholder:"Enter description... ",modules:p,formats:b})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Questions and Answers"}),o.map((t,s)=>e.jsxs("div",{className:"mb-4 p-4 border border-gray-200 rounded-md",children:[e.jsx("style",{jsx:!0,global:!0,children:`
              .ql-editor {
                min-height: 200px;
                max-height: 500px;
              }
              .ql-toolbar.ql-snow {
                border-radius: 0.375rem 0.375rem 0 0;
              }
              .ql-container.ql-snow {
                border-radius: 0 0 0.375rem 0.375rem;
              }
            `}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Questions"}),e.jsx(h,{value:t.question,onChange:a=>C(s,"question",a),placeholder:"Enter the question here... ",modules:p,formats:b})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Answers"}),e.jsx(h,{value:t.answer,onChange:a=>C(s,"answer",a),placeholder:"Enter the answer here... ",modules:p,formats:b})]}),e.jsxs("button",{type:"button",onClick:()=>O(s),className:"text-red-500 hover:text-red-700",children:[e.jsx(S,{className:"inline mr-1"})," Remove Question"]})]},s)),e.jsxs("button",{type:"button",onClick:J,className:"mt-2 text-[#00a39a] hover:text-[#136a65]",children:[e.jsx(A,{className:"inline mr-1"})," Add Question"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"FAQs"}),n.map((t,s)=>e.jsxs("div",{className:"mb-4 p-4 border border-gray-200 rounded-md",children:[e.jsx("input",{type:"text",value:t.question,onChange:a=>k(s,"question",a.target.value),placeholder:"FAQ Question",className:"w-full px-3 py-2 mb-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-visaclr focus:border-visaclr",required:!0}),e.jsx("div",{className:"mb-2",children:e.jsx("input",{type:"text",value:t.answer,onChange:a=>k(s,"answer",a.target.value),placeholder:"FAQ Answer",className:"w-full px-3 py-2 mb-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-visaclr focus:border-visaclr",required:!0})}),e.jsxs("button",{type:"button",onClick:()=>z(s),className:"text-red-500 hover:text-red-700",children:[e.jsx(S,{className:"inline mr-1"})," Remove FAQ"]})]},s)),e.jsxs("button",{type:"button",onClick:_,className:"mt-2 text-[#00a39a] hover:text-[#136a65]",children:[e.jsx(A,{className:"inline mr-1"})," Add FAQ"]})]}),e.jsx("button",{type:"submit",className:`w-full bg-[#00a39a] text-white py-2 px-4 rounded-md hover:bg-[#136a65] ${q?"bg-gray-400 cursor-not-allowed":"bg-[#00a39a] hover:bg-[#15756e]"}`,children:q?"Submitting...":"Submit visa"})]})},oe=()=>e.jsx("div",{className:"m-0",children:e.jsx(Z,{})});export{oe as default};
