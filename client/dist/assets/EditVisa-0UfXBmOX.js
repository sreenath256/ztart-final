import{b as z,r as l,a as B,j as e,L as O}from"./index-tmO2HUr7.js";import{j as D,b as E,m as J}from"./index.esm-7EgU41Cz.js";import{v as R,a as G}from"./Api-Yfgixm3F.js";import{R as x}from"./quill.snow-56W210MD.js";import"./iconBase-VPgEYFnN.js";const H=()=>{const{id:d}=z(),[b,h]=l.useState(""),[g,f]=l.useState(""),[p,v]=l.useState(""),[j,y]=l.useState(""),[N,w]=l.useState(""),[k,q]=l.useState(""),[C,T]=l.useState(null),[F,A]=l.useState(""),[M,L]=l.useState(""),[i,n]=l.useState([]),[r,c]=l.useState([]),V=B(),m={toolbar:[[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{size:["small",!1,"large","huge"]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],[{align:[]}],["link","image","video"],["clean"],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],["code-block"]]},u=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","link","image","video","color","background","align","script","indent","direction","code-block"];l.useEffect(()=>{(async()=>{var s;try{const a=await G.get(`${R.api_url}/api/1.0/admin/testimonial/testimonial/${d}`),o=(s=a==null?void 0:a.data)==null?void 0:s.data;console.log("From edit visa page",o),h(o.title),v(o.metaTitle),y(o.metaDescription),f(o.country),w(o.imageURL),q(o.imageAlt),A(o.description),L(o.about),n(o.questions||[]),c(o.faqs||[])}catch(a){console.error("Error fetching visa details:",a)}})()},[d]);const I=()=>{n([...i,{question:"",answer:""}])},U=t=>{const s=i.filter((a,o)=>o!==t);n(s)},S=(t,s,a)=>{const o=[...i];o[t][s]=a,n(o)},_=()=>{c([...r,{question:"",answer:""}])},$=t=>{const s=r.filter((a,o)=>o!==t);c(s)},Q=(t,s,a)=>{const o=[...r];o[t][s]=a,c(o)},P=async()=>{const t={metaTitle:p,metaDescription:j,imageAlt:k,country:g,title:b,description:F,about:M,questions:i,faqs:r,imageURL:N},s=new FormData;s.append("data",JSON.stringify(t)),C&&s.append("file",C);try{const a=await fetch(`${R.api_url}/api/1.0/admin/testimonial/update-testimonial/${d}`,{method:"PUT",body:s});a.ok?(V("/manage-visas"),console.log("Successfully updated visa details.")):console.error("Failed to update visa details:",await a.text())}catch(a){console.error("Error updating visa details:",a)}};return e.jsxs("div",{className:"w-full mx-auto p-4 bg-white shadow-md rounded-lg space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Edit Visa"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title"}),e.jsx("input",{type:"text",id:"title",value:b,onChange:t=>h(t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:outline-none focus:ring-opacity-50"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700",children:"Country"}),e.jsx("input",{type:"text",id:"country",value:g,onChange:t=>f(t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:outline-none focus:ring-opacity-50"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"metaTitle",className:"block text-sm font-medium text-gray-700",children:"Meta Title"}),e.jsx("input",{type:"text",id:"metaTitle",value:p,onChange:t=>v(t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:outline-none focus:ring-opacity-50"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"metaDescription",className:"block text-sm font-medium text-gray-700",children:"Meta Description"}),e.jsx("input",{type:"text",id:"metaDescription",value:j,onChange:t=>y(t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:outline-none focus:ring-opacity-50"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"image",className:"block text-sm font-medium text-gray-700",children:"Image"}),e.jsx("img",{src:N,alt:"Selected",className:"mt-1 w-full h-48 object-contain rounded-md"}),e.jsx("input",{type:"file",id:"image",onChange:t=>{const s=t.target.files[0];w(URL.createObjectURL(s)),T(s)},className:"mt-2 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image Alt"}),e.jsx("input",{type:"text",value:k,onChange:t=>q(t.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-visaclr focus:border-visaclr",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx(x,{value:F,onChange:t=>A(t),placeholder:"Enter description... ",modules:m,formats:u})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Questions and Answers"}),i.map((t,s)=>e.jsxs("div",{className:"mb-4 p-4 border border-gray-200 rounded-md",children:[e.jsx("style",{jsx:!0,global:!0,children:`
              .ql-editor {
                min-height: 200px;
                max-height: 500px;
              }
              .ql-toolbar.ql-snow {
                border-radius: 0.375rem 0.375rem 0 0;
              }
              .ql-container.ql-snow {
                border-radius: 0 0 0.375rem 0.375rem;
              }
            `}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Question"}),e.jsx(x,{value:t.question,onChange:a=>S(s,"question",a),placeholder:"Enter the question here... ",modules:m,formats:u})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Answer"}),e.jsx(x,{value:t.answer,onChange:a=>S(s,"answer",a),placeholder:"Enter the answer here... ",modules:m,formats:u})]}),e.jsxs("button",{type:"button",onClick:()=>U(s),className:"text-red-500 hover:text-red-700",children:[e.jsx(D,{className:"inline mr-1"})," Remove Question"]})]},s)),e.jsxs("button",{type:"button",onClick:I,className:"mt-2 text-[#00a39a] hover:text-[#136a65]",children:[e.jsx(E,{className:"inline mr-1"})," Add Question"]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"FAQs"}),r.map((t,s)=>e.jsxs("div",{className:"mb-4 p-4 border border-gray-200 rounded-md",children:[e.jsx("input",{type:"text",value:t.question,onChange:a=>Q(s,"question",a.target.value),placeholder:"FAQ Question",className:"w-full px-3 py-2 mb-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-visaclr focus:border-visaclr",required:!0}),e.jsx("div",{className:"mb-2",children:e.jsx("input",{type:"text",value:t.answer,onChange:a=>Q(s,"answer",a.target.value),placeholder:"FAQ Answer",className:"w-full px-3 py-2 mb-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-visaclr focus:border-visaclr",required:!0})}),e.jsxs("button",{type:"button",onClick:()=>$(s),className:"text-red-500 hover:text-red-700",children:[e.jsx(D,{className:"inline mr-1"})," Remove FAQ"]})]},s)),e.jsxs("button",{type:"button",onClick:_,className:"text-[#00a39a] hover:text-[#136a65]",children:[e.jsx(E,{className:"inline mr-1"})," Add FAQ"]})]}),e.jsx("button",{onClick:P,className:"bg-visaclr text-white px-4 py-2 rounded-md",children:"Save"})]})},ee=()=>(l.useState(!1),l.useState(null),e.jsxs("div",{className:"w-full ",children:[e.jsx("div",{className:"mb-8",children:e.jsx(O,{to:"/manage-visas",children:e.jsxs("button",{onClick:()=>console.log("Navigate back"),className:"flex items-center text-visaclr hover:text-visaclrhvr",children:[e.jsx(J,{className:"mr-2"})," Back to All Visas"]})})}),e.jsx(H,{})]}));export{ee as default};
