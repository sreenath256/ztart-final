import{r as o,a as y,j as e}from"./index-tmO2HUr7.js";import{v,a as w}from"./Api-Yfgixm3F.js";const L=({setAdmin:x})=>{const[l,f]=o.useState(""),[r,b]=o.useState(""),[d,t]=o.useState(""),[i,n]=o.useState(!1),p=y(),h=async s=>{var c,m,u;if(s.preventDefault(),l===""||r===""){t("Both fields are required");return}try{n(!0);const a=await w.post(`${v.api_url}/api/1.0/auth/login`,{email:l,password:r},{headers:{"Content-Type":"application/json"}});if(((c=a==null?void 0:a.data)==null?void 0:c.statusCode)!==200)throw new Error("Login failed!");const g=(m=a==null?void 0:a.data)==null?void 0:m.data;console.log(a.data.data),g?(x(!0),localStorage.setItem("user",JSON.stringify((u=a.data)==null?void 0:u.data)),p("/")):t("Invalid login credentials"),t(""),console.log("Logged in successfully:",g)}catch(a){console.log(a),t(a.message)}finally{n(!1)}};return e.jsx("div",{className:"bg-gray-100 flex flex-col justify-center sm:py-12",children:e.jsxs("div",{className:"p-10 xs:p-0 mx-auto md:w-full md:max-w-md",children:[e.jsx("h1",{className:"text-3xl font-bold text-center text-[#00a39a] mb-5",children:"Admin Login"}),e.jsx("div",{className:"bg-white shadow-lg w-full rounded-lg divide-y divide-gray-200",children:e.jsxs("form",{onSubmit:h,className:"px-5 py-7",children:[e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"email",className:"text-sm font-semibold text-gray-600 block",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",className:"w-full text-base px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-[#00a39a]",value:l,onChange:s=>f(s.target.value)})]}),e.jsxs("div",{className:"mb-7",children:[e.jsx("label",{htmlFor:"password",className:"text-sm font-semibold text-gray-600 block",children:"Password"}),e.jsx("input",{type:"password",id:"password",className:"w-full text-base px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-[#00a39a]",value:r,onChange:s=>b(s.target.value)})]}),d&&e.jsx("p",{className:"text-red-500 text-sm mb-3",children:d}),e.jsx("button",{type:"submit",className:`transition duration-200 bg-[#00a39a] hover:bg-[#008d85] focus:bg-[#008d85] text-white w-full py-2.5 rounded-lg text-sm font-semibold text-center ${i?"!bg-gray-400 cursor-not-allowed":"bg-[#00a39a] hover:bg-[#15756e]"} `,children:i?"Logging in":"Login"})]})})]})})};export{L as default};
