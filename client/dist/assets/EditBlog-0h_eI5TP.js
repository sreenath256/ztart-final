import{b as E,r as o,a as T,j as e,L as M}from"./index-tmO2HUr7.js";import{j as L,b as I,m as Q}from"./index.esm-7EgU41Cz.js";import{v as y,a as N}from"./Api-Yfgixm3F.js";import{R as U}from"./quill.snow-56W210MD.js";import"./iconBase-VPgEYFnN.js";const $=()=>{const{id:n}=E(),[d,m]=o.useState(""),[u,g]=o.useState(""),[b,f]=o.useState(""),[w,k]=o.useState(""),[c,h]=o.useState(""),[x,p]=o.useState(""),[l,i]=o.useState([]),[v,F]=o.useState(null),q=T(),C={toolbar:[[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{size:["small",!1,"large","huge"]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],[{align:[]}],["link","image","video"],["clean"],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],["code-block"]]},S=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","link","image","video","color","background","align","script","indent","direction","code-block"];o.useEffect(()=>{(async()=>{try{const t=await N.get(`${y.api_url}/api/1.0/admin/blog/blog/${n}`);console.log(t.data);const a=t==null?void 0:t.data.data;m(a.title),g(a.metaTitle),f(a.metaDescription),k(a.imageAlt),h(a.imageURL),p(a.description),i(a.faqs||[])}catch(t){console.error("Error fetching blog content:",t)}})()},[n]);const D=()=>{i([...l,{question:"",answer:""}])},A=s=>{const t=l.filter((a,r)=>r!==s);i(t)},j=(s,t,a)=>{const r=[...l];r[s][t]=a,i(r)},R=async()=>{const s={title:d,description:x,metaTitle:u,metaDescription:b,imageAlt:w,faqs:l,imageURL:c},t=new FormData;t.append("data",JSON.stringify(s)),v&&t.append("file",v),console.log(t);try{const a=await N.put(`${y.api_url}/api/1.0/admin/blog/update-blog/${n}`,t,{headers:{"Content-Type":"multipart/form-data"}});q("/manage-blogs"),console.log(a.data),alert("Blog updated successfully!")}catch(a){console.error("Error updating blog:",a),alert("Failed to update the blog.")}},B=s=>{const t=s.target.files[0];t&&(h(URL.createObjectURL(t)),F(t))};return e.jsxs("div",{className:"w-full mx-auto p-4 bg-white shadow-md rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Edit Blog"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title"}),e.jsx("input",{type:"text",id:"title",value:d,onChange:s=>m(s.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"metaTitle",className:"block text-sm font-medium text-gray-700",children:"Meta Title"}),e.jsx("input",{type:"text",id:"metaTitle",value:u,onChange:s=>g(s.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"metaDescription",className:"block text-sm font-medium text-gray-700",children:"Meta Description"}),e.jsx("input",{type:"text",id:"metaDescription",value:b,onChange:s=>f(s.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"image",className:"block text-sm font-medium text-gray-700",children:"Image"}),c&&e.jsx("img",{src:c,alt:"Selected",className:"mt-1 w-full h-48 object-contain rounded-md"}),e.jsx("input",{type:"file",id:"image",onChange:B,className:"mt-2 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("style",{jsx:!0,global:!0,children:`
          .ql-editor {
            min-height: 200px;
            max-height: 500px;
          }
          .ql-toolbar.ql-snow {
            border-radius: 0.375rem 0.375rem 0 0;
          }
          .ql-container.ql-snow {
            border-radius: 0 0 0.375rem 0.375rem;
          }
        `}),e.jsx("div",{className:"mb-2",children:e.jsx(U,{value:x,onChange:s=>p(s),placeholder:"Enter the Description here...",modules:C,formats:S})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"FAQs"}),l.map((s,t)=>e.jsxs("div",{className:"mb-4 p-2 border border-gray-200 rounded-md",children:[e.jsx("input",{type:"text",value:s.question,onChange:a=>j(t,"question",a.target.value),placeholder:"Question",className:"mb-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:bg-gray-100 focus:outline-none focus:ring-opacity-50"}),e.jsx("textarea",{value:s.answer,onChange:a=>j(t,"answer",a.target.value),placeholder:"Answer",className:"mb-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:outline-none focus:ring-opacity-50",rows:"3"}),e.jsxs("button",{onClick:()=>A(t),className:"text-red-600 hover:text-red-800",children:[e.jsx(L,{className:"inline mr-1"})," Remove FAQ"]})]},t)),e.jsxs("button",{onClick:D,className:"text-visaclrhvr hover:text-indigo-800",children:[e.jsx(I,{className:"inline mr-1"})," Add FAQ"]})]}),e.jsx("button",{onClick:R,className:"w-full bg-visaclrhvr text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-visaclr focus:ring-opacity-50",children:"Save"})]})},G=()=>(o.useState(!1),o.useState(null),e.jsxs("div",{className:"w-full ",children:[e.jsx("div",{className:"mb-8",children:e.jsx(M,{to:"/manage-blogs",children:e.jsxs("button",{onClick:()=>console.log("Navigate back"),className:"flex items-center text-visaclr hover:text-visaclrhvr",children:[e.jsx(Q,{className:"mr-2"})," Back to All Blogs"]})})}),e.jsx($,{})]}));export{G as default};
